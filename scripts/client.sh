#!/bin/bash


case "$1" in
    map)
        curl -X POST -H "Content-Type: application/json" -d '{"data":[{"node_id":"FC001","node_name":"Fulfillment_center FC001","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":-155.5648,"longitude":173.1111},"node_tags":["medicine","tools"],"is_secure":true,"is_active":true,"connections":[{"to":"FC003","connection_type":"drone","connection_conditions":["cleared"]},{"to":"FC010","connection_type":"waterway","connection_conditions":[]},{"to":"FC004","connection_type":"rail","connection_conditions":[]},{"to":"FC006","connection_type":"rail","connection_conditions":["infected_activity","weather_rain"]},{"to":"FC002","connection_type":"manual","connection_conditions":["weather_rain"]},{"to":"FC009","connection_type":"waterway","connection_conditions":["foggy_visibility"]},{"to":"FC007","connection_type":"blocked","connection_conditions":[]}]},{"node_id":"FC002","node_name":"Fulfillment_center FC002","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":168.43,"longitude":-55.3376},"node_tags":["food","medicine"],"is_secure":true,"is_active":true,"connections":[{"to":"FC010","connection_type":"drone","connection_conditions":["infected_activity","weather_rain"]},{"to":"FC007","connection_type":"manual","connection_conditions":[]},{"to":"FC006","connection_type":"waterway","connection_conditions":["weather_rain","foggy_visibility"]},{"to":"FC004","connection_type":"drone","connection_conditions":["cleared","weather_rain"]},{"to":"FC009","connection_type":"manual","connection_conditions":["foggy_visibility"]},{"to":"FC003","connection_type":"bridge","connection_conditions":[]},{"to":"FC001","connection_type":"trail","connection_conditions":["weather_rain","cleared"]}]},{"node_id":"FC003","node_name":"Fulfillment_center FC003","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":68.9442,"longitude":59.0992},"node_tags":["food","ammo"],"is_secure":true,"is_active":true,"connections":[{"to":"FC002","connection_type":"road","connection_conditions":["infected_activity","foggy_visibility"]},{"to":"FC001","connection_type":"trail","connection_conditions":[]},{"to":"FC004","connection_type":"waterway","connection_conditions":["weather_rain","reinforced"]},{"to":"FC007","connection_type":"drone","connection_conditions":["foggy_visibility"]},{"to":"FC010","connection_type":"rail","connection_conditions":["reinforced"]},{"to":"FC009","connection_type":"manual","connection_conditions":["weather_rain","reinforced"]},{"to":"FC006","connection_type":"blocked","connection_conditions":["infected_activity"]}]},{"node_id":"FC004","node_name":"Fulfillment_center FC004","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":-183.9707,"longitude":162.9462},"node_tags":["ammo","medicine"],"is_secure":true,"is_active":true,"connections":[{"to":"FC003","connection_type":"waterway","connection_conditions":[]},{"to":"FC002","connection_type":"tunnel","connection_conditions":["foggy_visibility"]},{"to":"FC006","connection_type":"tunnel","connection_conditions":["weather_rain","infected_activity"]},{"to":"FC010","connection_type":"rail","connection_conditions":[]},{"to":"FC009","connection_type":"tunnel","connection_conditions":[]},{"to":"FC007","connection_type":"blocked","connection_conditions":[]},{"to":"FC001","connection_type":"trail","connection_conditions":["foggy_visibility"]}]},{"node_id":"FC005","node_name":"Fulfillment_center FC005","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":102.4791,"longitude":-87.8131},"node_tags":["tools","ammo"],"is_secure":true,"is_active":false,"connections":[]},{"node_id":"FC006","node_name":"Fulfillment_center FC006","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":-121.9263,"longitude":171.3633},"node_tags":["medicine","tools"],"is_secure":true,"is_active":true,"connections":[{"to":"FC004","connection_type":"waterway","connection_conditions":["cleared","foggy_visibility"]},{"to":"FC009","connection_type":"drone","connection_conditions":["cleared"]},{"to":"FC001","connection_type":"rail","connection_conditions":["weather_rain"]},{"to":"FC002","connection_type":"manual","connection_conditions":["infected_activity"]},{"to":"FC003","connection_type":"blocked","connection_conditions":[]},{"to":"FC010","connection_type":"waterway","connection_conditions":["weather_rain"]},{"to":"FC007","connection_type":"rail","connection_conditions":["cleared"]}]},{"node_id":"FC007","node_name":"Fulfillment_center FC007","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":-27.4112,"longitude":21.5511},"node_tags":["tools","food"],"is_secure":true,"is_active":true,"connections":[{"to":"FC009","connection_type":"road","connection_conditions":["cleared"]},{"to":"FC010","connection_type":"waterway","connection_conditions":["weather_rain"]},{"to":"FC003","connection_type":"blocked","connection_conditions":["reinforced","infected_activity"]},{"to":"FC002","connection_type":"tunnel","connection_conditions":["reinforced"]},{"to":"FC004","connection_type":"blocked","connection_conditions":[]},{"to":"FC006","connection_type":"drone","connection_conditions":["cleared"]},{"to":"FC001","connection_type":"rail","connection_conditions":[]}]},{"node_id":"FC008","node_name":"Fulfillment_center FC008","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":101.2776,"longitude":56.0812},"node_tags":["water","food"],"is_secure":true,"is_active":false,"connections":[]},{"node_id":"FC009","node_name":"Fulfillment_center FC009","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":113.482,"longitude":74.1966},"node_tags":["water","tools"],"is_secure":true,"is_active":true,"connections":[{"to":"FC006","connection_type":"road","connection_conditions":[]},{"to":"FC010","connection_type":"rail","connection_conditions":["reinforced"]},{"to":"FC001","connection_type":"drone","connection_conditions":["cleared","weather_rain"]},{"to":"FC004","connection_type":"drone","connection_conditions":["reinforced","foggy_visibility"]},{"to":"FC007","connection_type":"drone","connection_conditions":["reinforced"]},{"to":"FC003","connection_type":"trail","connection_conditions":["infected_activity"]},{"to":"FC002","connection_type":"tunnel","connection_conditions":["infected_activity"]}]},{"node_id":"FC010","node_name":"Fulfillment_center FC010","node_type":"fulfillment_center","node_description":"Autogenerated fulfillment_center node","node_location":{"latitude":-154.6707,"longitude":52.2658},"node_tags":["food","water"],"is_secure":true,"is_active":true,"connections":[{"to":"FC003","connection_type":"trail","connection_conditions":["cleared"]},{"to":"FC002","connection_type":"road","connection_conditions":["infected_activity"]},{"to":"FC007","connection_type":"waterway","connection_conditions":["infected_activity","reinforced"]},{"to":"FC006","connection_type":"drone","connection_conditions":["weather_rain","infected_activity"]},{"to":"FC001","connection_type":"waterway","connection_conditions":["foggy_visibility","reinforced"]},{"to":"FC004","connection_type":"trail","connection_conditions":["weather_rain"]},{"to":"FC009","connection_type":"manual","connection_conditions":["foggy_visibility","reinforced"]}]},{"node_id":"MK001","node_name":"Market MK001","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":65.7182,"longitude":-125.4673},"node_tags":["tools","medicine"],"is_secure":true,"is_active":false,"connections":[]},{"node_id":"MK002","node_name":"Market MK002","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":-76.9273,"longitude":48.0901},"node_tags":["water","tools"],"is_secure":true,"is_active":true,"connections":[{"to":"MK004","connection_type":"drone","connection_conditions":["cleared"]},{"to":"MK009","connection_type":"tunnel","connection_conditions":[]},{"to":"MK003","connection_type":"road","connection_conditions":["weather_rain"]},{"to":"MK005","connection_type":"tunnel","connection_conditions":["reinforced"]},{"to":"MK010","connection_type":"waterway","connection_conditions":["reinforced","foggy_visibility"]},{"to":"MK008","connection_type":"waterway","connection_conditions":["reinforced","weather_rain"]}]},{"node_id":"MK003","node_name":"Market MK003","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":29.8424,"longitude":-91.0899},"node_tags":["ammo","tools"],"is_secure":true,"is_active":true,"connections":[{"to":"MK002","connection_type":"manual","connection_conditions":["reinforced"]},{"to":"MK008","connection_type":"road","connection_conditions":["cleared","foggy_visibility"]},{"to":"MK004","connection_type":"manual","connection_conditions":["weather_rain","infected_activity"]},{"to":"MK010","connection_type":"drone","connection_conditions":[]},{"to":"MK009","connection_type":"road","connection_conditions":["foggy_visibility","weather_rain"]},{"to":"MK005","connection_type":"tunnel","connection_conditions":[]}]},{"node_id":"MK004","node_name":"Market MK004","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":199.1768,"longitude":19.8682},"node_tags":["food","water"],"is_secure":true,"is_active":true,"connections":[{"to":"MK009","connection_type":"rail","connection_conditions":[]},{"to":"MK008","connection_type":"drone","connection_conditions":[]},{"to":"MK005","connection_type":"rail","connection_conditions":[]},{"to":"MK003","connection_type":"waterway","connection_conditions":["weather_rain","foggy_visibility"]},{"to":"MK002","connection_type":"blocked","connection_conditions":["infected_activity"]},{"to":"MK010","connection_type":"drone","connection_conditions":["reinforced","foggy_visibility"]}]},{"node_id":"MK005","node_name":"Market MK005","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":-136.4394,"longitude":-18.972},"node_tags":["water","medicine"],"is_secure":true,"is_active":true,"connections":[{"to":"MK008","connection_type":"road","connection_conditions":["cleared"]},{"to":"MK009","connection_type":"road","connection_conditions":["cleared"]},{"to":"MK002","connection_type":"trail","connection_conditions":[]},{"to":"MK003","connection_type":"rail","connection_conditions":["foggy_visibility"]},{"to":"MK004","connection_type":"trail","connection_conditions":["infected_activity","weather_rain"]},{"to":"MK010","connection_type":"road","connection_conditions":["foggy_visibility","reinforced"]}]},{"node_id":"MK006","node_name":"Market MK006","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":80.083,"longitude":81.9884},"node_tags":["water","ammo"],"is_secure":false,"is_active":true,"connections":[]},{"node_id":"MK007","node_name":"Market MK007","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":125.1153,"longitude":198.714},"node_tags":["food","water"],"is_secure":false,"is_active":true,"connections":[]},{"node_id":"MK008","node_name":"Market MK008","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":8.3948,"longitude":71.7506},"node_tags":["tools","food"],"is_secure":true,"is_active":true,"connections":[{"to":"MK004","connection_type":"waterway","connection_conditions":["cleared","reinforced"]},{"to":"MK002","connection_type":"trail","connection_conditions":["infected_activity"]},{"to":"MK005","connection_type":"bridge","connection_conditions":[]},{"to":"MK009","connection_type":"rail","connection_conditions":[]},{"to":"MK003","connection_type":"tunnel","connection_conditions":[]},{"to":"MK010","connection_type":"waterway","connection_conditions":["cleared"]}]},{"node_id":"MK009","node_name":"Market MK009","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":26.2547,"longitude":-42.281},"node_tags":["food","water"],"is_secure":true,"is_active":true,"connections":[{"to":"MK010","connection_type":"blocked","connection_conditions":["weather_rain","infected_activity"]},{"to":"MK005","connection_type":"road","connection_conditions":["foggy_visibility","cleared"]},{"to":"MK004","connection_type":"road","connection_conditions":["reinforced","cleared"]},{"to":"MK002","connection_type":"blocked","connection_conditions":[]},{"to":"MK008","connection_type":"manual","connection_conditions":["foggy_visibility","reinforced"]},{"to":"MK003","connection_type":"tunnel","connection_conditions":["foggy_visibility","infected_activity"]}]},{"node_id":"MK010","node_name":"Market MK010","node_type":"market","node_description":"Autogenerated market node","node_location":{"latitude":-99.5202,"longitude":-64.2028},"node_tags":["medicine","food"],"is_secure":true,"is_active":true,"connections":[{"to":"MK005","connection_type":"waterway","connection_conditions":[]},{"to":"MK004","connection_type":"rail","connection_conditions":["cleared"]},{"to":"MK003","connection_type":"drone","connection_conditions":[]},{"to":"MK002","connection_type":"tunnel","connection_conditions":[]},{"to":"MK009","connection_type":"tunnel","connection_conditions":[]},{"to":"MK008","connection_type":"drone","connection_conditions":["foggy_visibility"]}]}],"schema":{"version":"1.0"}}' 0.0.0.0:8080/map
        ;;
    flow)
        if [ -z "$2" ]; then
            echo "Usage: $0 flow <map_id>"
            exit 1
        fi
        req_body='{"map_id":"'"$2"'","source":"FC001","sink":"FC010"}'
        echo "Sending JSON: $req_body"
        curl -X POST -H "Content-Type: application/json" -d "$req_body" "0.0.0.0:8080/fullfilment-flow"
        ;;
    circuit)
        if [ -z "$2" ]; then
            echo "Usage: $0 circuit <map_id>"
            exit 1
        fi
        req_body='{"map_id":"'"$2"'","start":"FC001"}'
        echo "Sending JSON: $req_body"
        curl -X POST -H "Content-Type: application/json" -d "$req_body" "0.0.0.0:8080/fullfilment-circuit"
        ;;
    result)
        if [ -z "$2" ]; then
            echo "Usage: $0 result <map_id>"
            exit 1
        fi
        curl -X GET "0.0.0.0:8080/result?result_id=$2"
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
esac